import{c as k,r as i,j as e,B as N,L as he,X as ue,a as fe}from"./index-DJZj13a9.js";import{C as Q,a as Y}from"./card-C5JX6E1Y.js";import{S as O,a as H,b as U,c as W,d as J}from"./select-Cr9rPIAG.js";import{B as G,S as ee,c as K,a as v,C as ge}from"./skeleton-Bc1dlZ9k.js";import{A as je,v as we}from"./arrow-left-DNGmpU0m.js";import{E as se}from"./eye-h43dRJCD.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ne=k("ellipsis",pe);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],te=k("grid-3x3",ye);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],q=k("heart",be);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ke=k("message-circle",ve);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Se=k("pause",Ce);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],T=k("play",Me);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],$e=k("share",Ve);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Ie=k("smartphone",Ae),Le=({videos:n,onBackToGrid:_})=>{const[h,P]=i.useState(0),[C,g]=i.useState(!1),[f,B]=i.useState({}),[b,m]=i.useState({}),[j,I]=i.useState({}),[M,L]=i.useState(!1),[w,V]=i.useState(null),y=i.useRef({}),$=i.useRef(null),[D,R]=i.useState([]),[F,E]=i.useState(!1),[A,t]=i.useState(""),[x,p]=i.useState(!1),z=n[h]||n[0];i.useEffect(()=>{if(n.length>0){const s=n[0]?.id||"video-0";m(l=>({...l,[s]:!0})),u(s)}},[n]),i.useEffect(()=>{if(n.length>0){const s=n[0]?.id||"video-0",l=y.current[s];l&&l.play().catch(()=>{g(!1),m(a=>({...a,[s]:!1}))})}},[n]);const u=i.useCallback(async s=>{const l=n.find(a=>(a.id||`video-${n.indexOf(a)}`)===s);if(l?.videoUrl){if(j[s]){m(a=>({...a,[s]:!1}));return}try{if(b[s])return;m(r=>({...r,[s]:!0}));const a=document.createElement("video");a.src=l.videoUrl,a.preload="metadata",a.onloadedmetadata=()=>{I(r=>({...r,[s]:!0})),m(r=>({...r,[s]:!1}))},a.onerror=()=>{m(r=>({...r,[s]:!1}))}}catch(a){console.error("Failed to preload video:",a),m(r=>({...r,[s]:!1}))}}},[n,b,j]),X=i.useCallback(s=>{const a=Math.max(0,s-2),r=Math.min(n.length-1,s+2);for(let o=a;o<=r;o++){const c=n[o]?.id||`video-${o}`;!j[c]&&!b[c]&&u(c)}},[n,b,j,u]);i.useEffect(()=>{const s=()=>{if(!$.current)return;const a=$.current,r=a.scrollTop,o=a.clientHeight,c=Math.round(r/o);if(c!==h&&c>=0&&c<n.length){const d=y.current[n[h]?.id||`video-${h}`];d&&d.pause(),P(c),g(!1);const S=n[c]?.id||`video-${c}`;j[S]||(m(Z=>({...Z,[S]:!0})),u(S)),X(c),setTimeout(()=>{const Z=y.current[S];Z&&Z.play().catch(()=>{g(!1),m(xe=>({...xe,[S]:!1}))})},100)}},l=$.current;if(l)return l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)},[h,n,j,u,X]);const ae=()=>{const s=y.current[z?.id||`video-${h}`];if(s){if(C)s.pause();else{const l=z?.id||`video-${h}`;j[l]||(m(a=>({...a,[l]:!0})),u(l)),s.play().catch(()=>{g(!1),m(a=>({...a,[l]:!1}))})}g(!C)}},le=s=>{const l=f[s];B(r=>({...r,[s]:!r[s]}));const a=n.findIndex(r=>(r.id||`video-${n.indexOf(r)}`)===s);a!==-1&&(l?n[a].likeCount=Math.max(0,(n[a].likeCount||0)-1):n[a].likeCount=(n[a].likeCount||0)+1,P(h))},ne=s=>s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString(),re=s=>{const l=new Date(s),r=Math.abs(new Date().getTime()-l.getTime()),o=Math.ceil(r/(1e3*60*60*24));return o===1?"1 day ago":o<7?`${o} days ago`:o<30?`${Math.ceil(o/7)} weeks ago`:o<365?`${Math.ceil(o/30)} months ago`:`${Math.ceil(o/365)} years ago`},ie=async s=>{V(s),L(!0),t(""),await ce(s.id||`video-${n.indexOf(s)}`)},ce=async s=>{E(!0);try{const l=await K.getVideoComments(s,{limit:50});R(l)}catch(l){console.error("Error loading comments:",l),R([])}finally{E(!1)}},oe=async s=>{if(s.preventDefault(),!A.trim()||!w)return;const l=w.id||`video-${n.indexOf(w)}`;p(!0);try{const a=await K.addComment(l,{content:A.trim()});R(r=>[...r,a]),t("")}catch(a){console.error("Error submitting comment:",a)}finally{p(!1);const a=n.find(r=>r.id===l);a&&(a.commentCount=(a.commentCount||0)+1)}},de=s=>{const l=new Date(s),r=Math.abs(new Date().getTime()-l.getTime()),o=Math.floor(r/(1e3*60)),c=Math.floor(r/(1e3*60*60)),d=Math.floor(r/(1e3*60*60*24));return o<60?`${o}m ago`:c<24?`${c}h ago`:d<7?`${d}d ago`:l.toLocaleDateString()},me=()=>{L(!1),V(null)};return n.length===0?e.jsx("div",{className:"h-screen flex items-center justify-center bg-black text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No videos available"}),e.jsx("p",{className:"text-gray-400",children:"Check back later for new content"})]})}):e.jsxs("div",{className:"relative",children:[e.jsxs(N,{onClick:_,variant:"default",size:"sm",className:"fixed top-4 left-4 z-[9999] bg-white text-black hover:bg-gray-100 transition-all duration-200 shadow-xl border-2 border-gray-300",style:{position:"fixed",top:"16px",left:"16px",zIndex:9999},children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),e.jsx(te,{className:"h-4 w-4 mr-1"}),"Back to Grid"]}),e.jsxs("div",{ref:$,className:"tiktok-scroll h-screen overflow-y-scroll snap-y snap-mandatory bg-black",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[e.jsx("style",{children:`
          .tiktok-scroll::-webkit-scrollbar {
            display: none;
          }
        `}),n.map((s,l)=>{const a=s.id||`video-${l}`,r=b[a],o=j[a],c=l===h;return e.jsxs("div",{className:"relative h-screen w-full snap-start flex items-center justify-center",children:[e.jsxs("div",{className:"absolute inset-0 bg-black",children:[s.videoUrl?e.jsx("video",{ref:d=>y.current[a]=d,src:s.videoUrl,poster:s.thumbnailUrl||void 0,className:"w-full h-full object-cover",autoPlay:c,muted:!0,playsInline:!0,loop:!0,preload:c?"auto":"metadata",onLoadStart:()=>{o||m(d=>({...d,[a]:!0}))},onLoadedData:()=>{if(I(d=>({...d,[a]:!0})),m(d=>({...d,[a]:!1})),c){const d=y.current[a];d&&d.play().catch(()=>{g(!1),m(S=>({...S,[a]:!1}))})}},onPlay:()=>{c&&(g(!0),m(d=>({...d,[a]:!1})))},onPause:()=>{c&&g(!1)},onError:()=>{m(d=>({...d,[a]:!1}))}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx(T,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg",children:"Video not available"})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/20"})]}),r&&c&&!o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-15",children:e.jsxs("div",{className:"text-center",children:[e.jsx(he,{className:"mx-auto h-8 w-8 text-white animate-spin mb-2"}),e.jsx("p",{className:"text-white text-sm",children:"Loading video..."})]})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer z-10",onClick:ae,children:c&&!r&&e.jsx("div",{className:"bg-black/30 rounded-full p-3 sm:p-4 transition-opacity duration-200",children:C?e.jsx(Se,{className:"h-8 w-8 sm:h-12 sm:w-12 text-white"}):e.jsx(T,{className:"h-8 w-8 sm:h-12 sm:w-12 text-white ml-1"})})}),e.jsx("div",{className:"absolute inset-0 flex flex-col justify-end p-3 sm:p-4 z-20",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"flex-1 mr-2 sm:mr-4 max-w-[calc(100%-80px)] sm:max-w-[calc(100%-100px)]",children:[e.jsx("div",{className:"mb-1 sm:mb-2",children:e.jsx(G,{variant:"secondary",className:"bg-white/20 text-white border-none mb-1 sm:mb-2 text-xs",children:s.isPublic?"Public":"Private"})}),e.jsx("h2",{className:"text-white text-base sm:text-lg font-semibold mb-1 sm:mb-2 line-clamp-2",children:s.title||"Untitled Video"}),e.jsxs("p",{className:"text-white/80 text-sm mb-1 sm:mb-2",children:["@",s.creator?.username?.toLowerCase().replace(/\s+/g,"")||"unknown"]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2 sm:gap-4 text-white/70 text-xs sm:text-sm mb-2 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(se,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:ne(s.views||0)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ee,{className:"h-3 w-3 sm:h-4 sm:w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:(s.averageRating||0).toFixed(1)})]}),(s.totalRatings||0)>0&&e.jsxs(G,{variant:"outline",className:"border-white/30 text-white/70 text-xs",children:[s.totalRatings||0," rating",(s.totalRatings||0)!==1?"s":""]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("span",{className:"text-white/70 text-xs",children:s.createdAt?re(s.createdAt):"Recently"})})]})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:space-y-4 flex-shrink-0",children:[e.jsx(N,{variant:"ghost",size:"icon",className:`rounded-full h-10 w-10 sm:h-12 sm:w-12 ${f[a]?"bg-red-500/20 text-red-500":"bg-white/20 text-white hover:bg-white/30"}`,onClick:()=>le(a),children:e.jsx(q,{className:`h-5 w-5 sm:h-6 sm:w-6 ${f[a]?"fill-current":""}`})}),e.jsx("span",{className:"text-white text-xs",children:s.likeCount}),e.jsx(N,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 sm:h-12 sm:w-12 bg-white/20 text-white hover:bg-white/30",onClick:()=>ie(s),children:e.jsx(ke,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),e.jsx("span",{className:"text-white text-xs",children:s.commentCount}),e.jsx(N,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 sm:h-12 sm:w-12 bg-white/20 text-white hover:bg-white/30",children:e.jsx($e,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 sm:h-12 sm:w-12 bg-white/20 text-white hover:bg-white/30",children:e.jsx(Ne,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/20 z-30",children:e.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:c?"100%":"0%",transitionDuration:c?"3s":"0s"}})})]},a)})]}),M&&w&&e.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/50",children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl transform transition-transform duration-300 ease-out flex flex-col",style:{height:"70vh",transform:M?"translateY(0)":"translateY(100%)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-1 h-8 bg-gray-300 rounded-full"}),e.jsxs("span",{className:"text-lg font-semibold",children:["Comments (",D.length,")"]})]}),e.jsx(N,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8",onClick:me,children:e.jsx(ue,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:F?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((s,l)=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-24 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-full"})]})]},l))}):D.length>0?e.jsx("div",{className:"space-y-4",children:D.map(s=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex-shrink-0 flex items-center justify-center text-xs font-medium text-gray-600",children:s.user?.username?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-sm",children:s.user?.username||"Unknown"}),e.jsx("span",{className:"text-gray-500 text-xs",children:de(s.createdAt)})]}),e.jsx("p",{className:"text-sm mt-1",children:s.content}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("button",{className:"flex items-center space-x-1 hover:text-red-500",children:[e.jsx(q,{className:"h-3 w-3"}),e.jsx("span",{children:"0"})]}),e.jsx("button",{className:"hover:text-blue-500",children:"Reply"})]})]})]},s.id))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No comments yet. Be the first to comment!"})})}),e.jsx("div",{className:"border-t border-gray-200 p-4 flex-shrink-0",children:e.jsx("form",{onSubmit:oe,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex-shrink-0 flex items-center justify-center text-xs font-medium text-gray-600",children:"U"}),e.jsx("div",{className:"flex-1 bg-gray-100 rounded-full px-4 py-2",children:e.jsx("input",{type:"text",placeholder:"Add a comment...",value:A,onChange:s=>t(s.target.value),className:"w-full bg-transparent outline-none text-sm"})}),e.jsx(N,{type:"submit",variant:"ghost",className:"text-blue-500 font-semibold text-sm px-4 py-2",disabled:!A.trim()||x,children:x?"Posting...":"Post"})]})})})]})})]})},De=["All","Nature","Art","Food","Adventure","Technology","Dance","Music","Sports","Education"],Re=["All","G","PG","PG-13","R"],Te=[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"most-viewed",label:"Most Viewed"},{value:"top-rated",label:"Top Rated"}],Be=()=>{const[n,_]=i.useState([]),[h,P]=i.useState([]),[C,g]=i.useState(!0),[f,B]=i.useState(""),[b,m]=i.useState("All"),[j,I]=i.useState("All"),[M,L]=i.useState("newest"),[w,V]=i.useState("grid");i.useEffect(()=>{$()},[]);const y=i.useCallback(()=>{let t=[...n];f&&(t=t.filter(x=>x.title.toLowerCase().includes(f.toLowerCase())||x.description.toLowerCase().includes(f.toLowerCase())||x.creator.username.toLowerCase().includes(f.toLowerCase()))),t.sort((x,p)=>{switch(M){case"newest":return new Date(p.createdAt).getTime()-new Date(x.createdAt).getTime();case"oldest":return new Date(x.createdAt).getTime()-new Date(p.createdAt).getTime();case"most-viewed":return p.views-x.views;case"top-rated":return p.averageRating-x.averageRating;default:return 0}}),P(t)},[n,f,b,j,M]);i.useEffect(()=>{y()},[y]);const $=async()=>{g(!0);try{const t=await we.getVideos({page:1,limit:50,sortBy:"createdAt",sortOrder:"desc"});_(t.videos)}catch(t){console.error("Error loading videos:",t)}finally{g(!1)}},D=t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString(),R=t=>{const x=new Date(t),z=Math.abs(new Date().getTime()-x.getTime()),u=Math.ceil(z/(1e3*60*60*24));return u===1?"1 day ago":u<7?`${u} days ago`:u<30?`${Math.ceil(u/7)} weeks ago`:u<365?`${Math.ceil(u/30)} months ago`:`${Math.ceil(u/365)} years ago`},F=t=>{if(!t)return"0:00";const x=Math.floor(t/60),p=t%60;return`${x}:${p.toString().padStart(2,"0")}`},E=({video:t})=>e.jsx(Q,{className:"group cursor-pointer transition-all duration-200 hover:shadow-lg hover:-translate-y-1",children:e.jsxs(fe,{to:`/video/${t.id}`,children:[e.jsxs("div",{className:"relative overflow-hidden rounded-t-lg",children:[e.jsx("img",{src:t.thumbnailUrl||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjMDAwMDAwIi8+Cjx0ZXh0IHg9IjE2MCIgeT0iOTAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiIgZmlsbD0iI0ZGRkZGRiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+VmlkZW8gVGh1bWJuYWlsPC90ZXh0Pgo8L3N2Zz4=",alt:t.title,className:"w-full h-48 object-cover transition-transform duration-200 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:e.jsx(T,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 h-12 w-12"})}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:F(t.duration)})]}),e.jsxs(Y,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.creator.username}),e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:D(t.views)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:R(t.createdAt)})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{variant:"secondary",className:"text-xs",children:t.isPublic?"Public":"Private"}),t.totalRatings>0&&e.jsxs(G,{variant:"outline",className:"text-xs",children:[t.totalRatings," rating",t.totalRatings!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ee,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:t.averageRating.toFixed(1)})]})]})]})]})}),A=()=>e.jsxs(Q,{children:[e.jsx(v,{className:"w-full h-48 rounded-t-lg"}),e.jsxs(Y,{className:"p-4",children:[e.jsx(v,{className:"h-6 w-3/4 mb-2"}),e.jsx(v,{className:"h-4 w-1/2 mb-3"}),e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(v,{className:"h-4 w-16"}),e.jsx(v,{className:"h-4 w-20"})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(v,{className:"h-5 w-16"}),e.jsx(v,{className:"h-5 w-8"})]}),e.jsx(v,{className:"h-4 w-12"})]})]})]});return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Discover Videos"}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[e.jsxs(N,{variant:w==="grid"?"default":"ghost",size:"sm",onClick:()=>V("grid"),className:"h-8 px-3",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"Grid"]}),e.jsxs(N,{variant:w==="tiktok"?"default":"ghost",size:"sm",onClick:()=>V("tiktok"),className:"h-8 px-3",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"TikTok"]})]})]}),w==="grid"&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[e.jsxs(O,{value:b,onValueChange:m,children:[e.jsx(H,{className:"w-full sm:w-[140px]",children:e.jsx(U,{placeholder:"Genre"})}),e.jsx(W,{children:De.map(t=>e.jsx(J,{value:t,children:t},t))})]}),e.jsxs(O,{value:j,onValueChange:I,children:[e.jsx(H,{className:"w-full sm:w-[120px]",children:e.jsx(U,{placeholder:"Age Rating"})}),e.jsx(W,{children:Re.map(t=>e.jsx(J,{value:t,children:t},t))})]}),e.jsxs(O,{value:M,onValueChange:L,children:[e.jsx(H,{className:"w-full sm:w-[140px]",children:e.jsx(U,{placeholder:"Sort by"})}),e.jsx(W,{children:Te.map(t=>e.jsx(J,{value:t.value,children:t.label},t.value))})]})]})]}),!C&&w==="grid"&&e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:h.length===0?f?`No videos found for "${f}"`:"No videos found":`Showing ${h.length} video${h.length!==1?"s":""}`})]}),w==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:C?Array.from({length:8}).map((t,x)=>e.jsx(A,{},x)):h.length>0?h.map(t=>e.jsx(E,{video:t},t.id)):e.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No videos found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:f?"Try adjusting your search or filters to find what you're looking for.":"There are no videos available at the moment."}),f&&e.jsx(N,{variant:"outline",onClick:()=>{B(""),m("All"),I("All"),L("newest")},children:"Clear filters"})]})})}):e.jsx("div",{className:"fixed inset-0 top-16 z-40",children:C?e.jsx("div",{className:"h-screen flex items-center justify-center bg-black text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{children:"Loading videos..."})]})}):e.jsx(Le,{videos:h,onBackToGrid:()=>V("grid")})})]})})};export{Be as default};
